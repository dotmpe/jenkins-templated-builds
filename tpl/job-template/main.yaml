
- std_freestyle_parts_1: &std_freestyle_parts_1
    name: std_freestyle_parts_1

    parameters: '{obj:parameters}'
    properties: '{obj:properties}'


- std_freestyle_parts_1_2: &std_freestyle_parts_1_2
    name: std_freestyle_parts_1_2

    triggers: '{obj:triggers}'
    <<: *std_freestyle_parts_1


- std_freestyle_parts_1_2_3: &std_freestyle_parts_1_2_3
    name: std_freestyle_parts_1_2_3

    builders: '{obj:builders}'
    <<: *std_freestyle_parts_1_2


- job-template:
    name: '{name}-base-0'

    # contains basic job properties, builders, wrappers and publishers
    <<: *std_freestyle_job

    triggers: '{obj:triggers}'
    <<: *std_freestyle_parts_1


- job-template:
    name: '{name}-jtb-0'
    <<: *gh_job

    parameters:
    - bool:
        name: JJB_Dry_Run
        default: true
    - choice:
        name: JJB_Files
        choices:
        - jtb.yaml:tpl/base.yaml

    builders:
    - builder-jtb-0:
        jjb-files: '$JJB_Files'


- job-template:
    name: '{name}-jtb-1'
    <<: *std_freestyle_job

    parameters:
    - choice:
        name: JTB_File
        choices:
        - jtb.yaml
        - jtb-simple.yaml

    builders:
    - builder-jtb-1:
        jtb-file: '$JTB_File'


- job-template:
    name: '{name}-jtb-2'
    <<: *std_freestyle_job

    builders:
    - builder-jtb-2




## Github builds (work in progress, untested)


- job-template:
    name: '{name}-gh-automake'
    <<: *std_freestyle_job

    scm:
    - 'scm-{vendor-repo}-0':
        vendor-path: '{vendor-path}'
        branch: '{branch}'
        credentials-id: '{credentials-id}'

    triggers:
    - github

    builders:
    - jtb-automake-builder-0


- job-template:
    name: '{name}-gh'
    <<: *restrict_node
    <<: *gh_job
    <<: *gh_trigger

    builders: '{obj:builders}'


## Travis builds (work in progress, testing)


# Jobs for github, public and private

- job-template:
    name: '{name}-gh-travis'
    <<: *restrict_node
    # NOTE: this would only work with a public server
    <<: *gh_trigger
    <<: *gh_job
    <<: *std_console_output_wrapper

    builders:
    - jtb-travis-builder-0

    <<: *std_freestyle_parts_1

- job-template:
    name: '{name}-local-gh-travis'
    <<: *restrict_node
    <<: *std_scm_trigger
    # Private uses SSH and requires a key setup
    <<: *private_gh_job
    <<: *std_console_output_wrapper

    builders:
    - jtb-travis-builder-0

    <<: *std_freestyle_parts_1


## Work in JJB builder

- job-template:
    name: '{name}-jjb-local'
    <<: *std_freestyle_job

    builders: '{obj:builders}'

    <<: *std_freestyle_parts_1


## Work in progress JTB builder

- job-template:
    name: '{name}-jtb-install-local'
    <<: *std_freestyle_job
    <<: *std_freestyle_parts_1


## Work in progress free-style GIT checkout build

- job-template:
    name: '{name}-free-git'
    <<: *std_freestyle_job
    <<: *std_git_co
    <<: *std_freestyle_parts_1




# Id: jtb/0.0.2-test 

